(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6267],{5919:(e,a,s)=>{Promise.resolve().then(s.bind(s,3868))},6046:(e,a,s)=>{"use strict";var l=s(6658);s.o(l,"useParams")&&s.d(a,{useParams:function(){return l.useParams}}),s.o(l,"usePathname")&&s.d(a,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(a,{useRouter:function(){return l.useRouter}}),s.o(l,"useSearchParams")&&s.d(a,{useSearchParams:function(){return l.useSearchParams}})},3868:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var l=s(5155),r=s(2115),t=s(6046);function n(){var e,a,s,n,i;let o=(0,t.useRouter)(),[m,d]=(0,r.useState)({maxDiscountPercent:null,maxManualDiscountAmount:null,maxSaleTotal:null,maxItemsPerSale:null,maxReceivableBalance:null}),[c,u]=(0,r.useState)(!0),[x,b]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y()},[]);let y=async()=>{u(!0),h(null);try{let e=await fetch("/api/admin/operational-limits");if(!e.ok)throw Error("Error al cargar l\xedmites");let a=await e.json();d(a.limits)}catch(e){h(e.message)}finally{u(!1)}},f=async e=>{e.preventDefault(),b(!0),h(null),j(!1);try{let e=await fetch("/api/admin/operational-limits",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({limits:m})});if(!e.ok){let a=await e.json();throw Error(a.message||"Error al guardar l\xedmites")}j(!0),setTimeout(()=>j(!1),3e3)}catch(e){h(e.message)}finally{b(!1)}},v=(e,a)=>{if(""===a||null===a)d({...m,[e]:null});else{let s=parseFloat(a);!isNaN(s)&&s>=0&&d({...m,[e]:s})}};return c?(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"L\xedmites Operativos"}),(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando l\xedmites..."})]})]})}):(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"L\xedmites Operativos"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Configura l\xedmites para proteger contra errores operativos. Dejar en blanco = sin l\xedmite."})]}),(0,l.jsx)("button",{onClick:()=>o.back(),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"← Volver"})]}),p&&(0,l.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:[(0,l.jsx)("strong",{children:"Error:"})," ",p]}),g&&(0,l.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg text-green-800",children:[(0,l.jsx)("strong",{children:"✓"})," L\xedmites actualizados correctamente"]}),(0,l.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"\uD83D\uDCC9 L\xedmites de Descuentos"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento Porcentual M\xe1ximo (%)"}),(0,l.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:null!==(e=m.maxDiscountPercent)&&void 0!==e?e:"",onChange:e=>v("maxDiscountPercent",e.target.value),placeholder:"Sin l\xedmite",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Ejemplo: 50 = no permite descuentos mayores al 50%"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento Manual M\xe1ximo (S/)"}),(0,l.jsx)("input",{type:"number",min:"0",step:"0.01",value:null!==(a=m.maxManualDiscountAmount)&&void 0!==a?a:"",onChange:e=>v("maxManualDiscountAmount",e.target.value),placeholder:"Sin l\xedmite",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Ejemplo: 100 = no permite descuentos manuales mayores a S/ 100"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"\uD83D\uDED2 L\xedmites de Ventas"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total M\xe1ximo por Venta (S/)"}),(0,l.jsx)("input",{type:"number",min:"0",step:"0.01",value:null!==(s=m.maxSaleTotal)&&void 0!==s?s:"",onChange:e=>v("maxSaleTotal",e.target.value),placeholder:"Sin l\xedmite",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Ejemplo: 5000 = no permite ventas mayores a S/ 5,000"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe1ximo de \xcdtems por Venta"}),(0,l.jsx)("input",{type:"number",min:"0",step:"1",value:null!==(n=m.maxItemsPerSale)&&void 0!==n?n:"",onChange:e=>v("maxItemsPerSale",e.target.value),placeholder:"Sin l\xedmite",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Ejemplo: 50 = no permite m\xe1s de 50 \xedtems en una venta"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"\uD83D\uDCB3 L\xedmites de Cuentas por Cobrar (FIADO)"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Balance M\xe1ximo por Cliente (S/)"}),(0,l.jsx)("input",{type:"number",min:"0",step:"0.01",value:null!==(i=m.maxReceivableBalance)&&void 0!==i?i:"",onChange:e=>v("maxReceivableBalance",e.target.value),placeholder:"Sin l\xedmite",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Ejemplo: 1000 = no permite que un cliente acumule m\xe1s de S/ 1,000 en deudas"})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"ℹ️ Informaci\xf3n Importante"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,l.jsxs)("li",{children:["• Los l\xedmites se aplican en ",(0,l.jsx)("strong",{children:"tiempo real"})," durante el checkout"]}),(0,l.jsxs)("li",{children:["• Dejar un campo vac\xedo significa ",(0,l.jsx)("strong",{children:"sin l\xedmite"})]}),(0,l.jsx)("li",{children:"• 0 NO significa deshabilitado (usar campo vac\xedo para eso)"}),(0,l.jsx)("li",{children:"• Los cambios se aplican inmediatamente"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{type:"submit",disabled:x,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:x?"Guardando...":"Guardar Cambios"}),(0,l.jsx)("button",{type:"button",onClick:y,disabled:x,className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Recargar"})]})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8441,1517,7358],()=>a(5919)),_N_E=e.O()}]);