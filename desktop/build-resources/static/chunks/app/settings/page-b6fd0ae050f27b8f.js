(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4662],{2045:(e,s,a)=>{Promise.resolve().then(a.bind(a,4327))},6046:(e,s,a)=>{"use strict";var t=a(6658);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},4327:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var t=a(5155),r=a(2115),n=a(6046);function o(){var e;let s=(0,n.useRouter)(),[a,o]=(0,r.useState)(!0),[i,d]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),[x,g]=(0,r.useState)(null),[h,b]=(0,r.useState)(null),[p,f]=(0,r.useState)({storeName:"",storeRuc:"",storeAddress:"",storePhone:"",ticketFooter:"",taxRate:0});async function y(){try{var e,a;let t=await fetch("/api/settings");if(403===t.status){s.push("/");return}if(!t.ok)throw Error("Error al cargar configuraci\xf3n");let r=await t.json();g(r.store),b(r.settings),f({storeName:r.store.name||"",storeRuc:r.store.ruc||"",storeAddress:r.store.address||"",storePhone:r.store.phone||"",ticketFooter:(null===(e=r.settings)||void 0===e?void 0:e.ticketFooter)||"",taxRate:(null===(a=r.settings)||void 0===a?void 0:a.taxRate)||0})}catch(e){c("Error al cargar configuraci\xf3n")}finally{o(!1)}}async function j(e){e.preventDefault(),c(""),m(!1),d(!0);try{let e=await fetch("/api/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),s=await e.json();if(!e.ok){c(s.message||"Error al guardar");return}m(!0),setTimeout(()=>m(!1),3e3)}catch(e){c("Error de red")}finally{d(!1)}}return((0,r.useEffect)(()=>{y()},[]),a)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsx)("p",{children:"Cargando..."})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuraci\xf3n"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Ajustes de la tienda"})]}),(0,t.jsx)("button",{onClick:()=>s.push("/"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Volver"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[l&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6",children:l}),u&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded mb-6",children:"✓ Configuraci\xf3n guardada correctamente"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Informaci\xf3n de la Tienda"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Tienda *"}),(0,t.jsx)("input",{type:"text",required:!0,value:p.storeName,onChange:e=>f({...p,storeName:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RUC"}),(0,t.jsx)("input",{type:"text",value:p.storeRuc,onChange:e=>f({...p,storeRuc:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direcci\xf3n"}),(0,t.jsx)("input",{type:"text",value:p.storeAddress,onChange:e=>f({...p,storeAddress:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tel\xe9fono"}),(0,t.jsx)("input",{type:"text",value:p.storePhone,onChange:e=>f({...p,storePhone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Configuraci\xf3n de Tickets"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pie de P\xe1gina del Ticket"}),(0,t.jsx)("textarea",{rows:3,value:p.ticketFooter,onChange:e=>f({...p,ticketFooter:e.target.value}),placeholder:"Ej: Gracias por su compra",className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Mensaje que aparece al final de cada ticket"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tasa de Impuesto (%)"}),(0,t.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:p.taxRate,onChange:e=>f({...p,taxRate:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"IGV u otro impuesto aplicable (0 para sin impuesto)"})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-6 flex gap-3",children:[(0,t.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400 font-medium",children:i?"Guardando...":"Guardar Cambios"}),(0,t.jsx)("button",{type:"button",onClick:()=>s.push("/"),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancelar"})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Copias de Seguridad"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Exporta y gestiona backups de tu tienda para recuperaci\xf3n ante desastres."}),(0,t.jsx)("button",{onClick:()=>s.push("/settings/backups"),className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-medium",children:"Gestionar Backups"})]}),(null===(e=window.desktop)||void 0===e?void 0:e.isDesktop)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\uD83D\uDDA8️ Impresora T\xe9rmica"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Configura la impresi\xf3n directa ESC/POS por USB o Red (puerto 9100)."}),(0,t.jsx)("button",{onClick:()=>s.push("/settings/printer"),className:"px-6 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 font-medium",children:"Configurar Impresora"})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\uD83D\uDDC4️ Base de Datos Local"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Configura PostgreSQL embebido para funcionamiento offline completo."}),(0,t.jsx)("button",{onClick:()=>s.push("/settings/database"),className:"px-6 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 font-medium",children:"Configurar Base de Datos"})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"\uD83E\uDDFE Facturaci\xf3n Electr\xf3nica SUNAT"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Configura la emisi\xf3n de boletas y facturas electr\xf3nicas para tu negocio."}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{onClick:()=>s.push("/onboarding/sunat"),className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-medium",children:"Configurar SUNAT"}),(0,t.jsx)("button",{onClick:()=>s.push("/sunat/documents"),className:"px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 font-medium",children:"\uD83D\uDCCB Ver Documentos Electr\xf3nicos"})]})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8441,1517,7358],()=>s(2045)),_N_E=e.O()}]);