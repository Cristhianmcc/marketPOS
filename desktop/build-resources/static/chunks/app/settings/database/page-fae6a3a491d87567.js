(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2686],{7925:(e,s,a)=>{Promise.resolve().then(a.bind(a,3763))},7401:(e,s,a)=>{"use strict";a.d(s,{A:()=>m});var r=a(2115);let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,a)=>a?a.toUpperCase():s.toLowerCase()),i=e=>{let s=l(e);return s.charAt(0).toUpperCase()+s.slice(1)},n=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim()},c=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,s)=>{let{color:a="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:m,iconNode:x,...u}=e;return(0,r.createElement)("svg",{ref:s,...d,width:t,height:t,stroke:a,strokeWidth:i?24*Number(l)/Number(t):l,className:n("lucide",o),...!m&&!c(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[s,a]=e;return(0,r.createElement)(s,a)}),...Array.isArray(m)?m:[m]])}),m=(e,s)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,r.createElement)(o,{ref:l,iconNode:s,className:n("lucide-".concat(t(i(e))),"lucide-".concat(e),c),...d})});return a.displayName=i(e),a}},6336:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5340:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6889:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1476:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},4505:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1773:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3950:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(7401).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3763:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var r,t=a(5155),l=a(2115),i=a(814),n=a(3950),c=a(4505),d=a(1476),o=a(6336),m=a(5340),x=a(7401);let u=(0,x.A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var h=a(6889);let g=(0,x.A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),p=(0,x.A)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),y=(0,x.A)("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);var N=a(1773);let j=null===(r=window.desktop)||void 0===r?void 0:r.isDesktop;function b(){let[e,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(null),[x,b]=(0,l.useState)(!0),[v,f]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[A,S]=(0,l.useState)(null),E=(0,l.useCallback)(async()=>{if(!j){b(!1);return}try{let e=window.desktop,[a,t,l]=await Promise.all([e.pg.getStatus(),e.pg.getConfig(),e.pg.isAdmin()]);s(a),r(t),k(l)}catch(e){console.error("Error loading PostgreSQL status:",e),i.oR.error("Error al cargar estado de PostgreSQL")}finally{b(!1)}},[]);(0,l.useEffect)(()=>{E();let e=setInterval(E,5e3);return()=>clearInterval(e)},[E]);let L=async e=>{if(j){f(!0);try{let s=window.desktop,a=await s.pg.setRunMode(e);a.success?(i.oR.success("Modo cambiado a ".concat(C(e))),await E()):a.requiresAdmin?i.oR.error("Se requieren permisos de administrador",{description:"Ejecuta la aplicaci\xf3n como administrador para usar este modo."}):i.oR.error(a.error||"Error al cambiar modo")}catch(e){i.oR.error(e.message||"Error al cambiar modo")}finally{f(!1)}}},P=async()=>{if(j){S("start");try{let e=await window.desktop.pg.start();e.success?(i.oR.success("PostgreSQL iniciado"),await E()):i.oR.error(e.error||"Error al iniciar PostgreSQL")}catch(e){i.oR.error(e.message||"Error")}finally{S(null)}}},I=async()=>{if(j){S("stop");try{let e=await window.desktop.pg.stop();e.success?(i.oR.success("PostgreSQL detenido"),await E()):i.oR.error(e.error||"Error al detener PostgreSQL")}catch(e){i.oR.error(e.message||"Error")}finally{S(null)}}},C=e=>{switch(e){case"APP_LIFETIME":return"Ciclo de Vida de App";case"TASK_AT_LOGON":return"Tarea Programada (al iniciar sesi\xf3n)";case"WINDOWS_SERVICE":return"Servicio de Windows";default:return e}},M=e=>{switch(e){case"APP_LIFETIME":return"PostgreSQL se inicia y detiene junto con la aplicaci\xf3n. No requiere permisos especiales.";case"TASK_AT_LOGON":return"PostgreSQL se inicia autom\xe1ticamente al iniciar sesi\xf3n en Windows. No requiere permisos de administrador.";case"WINDOWS_SERVICE":return"PostgreSQL se ejecuta como servicio de Windows. Permanece activo incluso sin sesi\xf3n iniciada. Requiere permisos de administrador.";default:return""}};return j?x?(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Base de Datos Local"}),(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(c.A,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,t.jsx)("span",{className:"ml-3 text-gray-600",children:"Cargando estado..."})]})]}):(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Base de Datos Local"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Configuraci\xf3n de PostgreSQL embebido para modo offline"}),(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,t.jsx)(d.A,{className:"w-6 h-6 text-blue-600 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Estado de PostgreSQL"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(null==e?void 0:e.running)?(0,t.jsx)(o.A,{className:"w-5 h-5 text-green-600"}):(0,t.jsx)(m.A,{className:"w-5 h-5 text-red-500"}),(0,t.jsx)("span",{className:"font-medium",children:(null==e?void 0:e.running)?"Ejecut\xe1ndose":"Detenido"})]}),(null==e?void 0:e.running)&&(null==e?void 0:e.pid)&&(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["PID: ",e.pid]}),(null==a?void 0:a.port)&&(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Puerto: ",a.port]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(u,{className:"w-5 h-5 text-blue-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Modo de Ejecuci\xf3n"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:(null==e?void 0:e.runMode)?C(e.runMode):"No configurado"})]}),(null==e?void 0:e.taskRegistered)!==void 0&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 text-purple-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Tarea Programada"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.taskRegistered?"Registrada":"No registrada"})]}),(null==e?void 0:e.serviceInstalled)!==void 0&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(g,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("span",{className:"font-medium",children:"Servicio Windows"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.serviceInstalled?e.serviceRunning?"Instalado y ejecut\xe1ndose":"Instalado (detenido)":"No instalado"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:P,disabled:null!==A||(null==e?void 0:e.running),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat((null==e?void 0:e.running)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:["start"===A?(0,t.jsx)(c.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(p,{className:"w-4 h-4"}),"Iniciar"]}),(0,t.jsxs)("button",{onClick:I,disabled:null!==A||!(null==e?void 0:e.running),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ".concat((null==e?void 0:e.running)?"bg-red-600 text-white hover:bg-red-700":"bg-gray-100 text-gray-400 cursor-not-allowed"),children:["stop"===A?(0,t.jsx)(c.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(y,{className:"w-4 h-4"}),"Detener"]}),(0,t.jsxs)("button",{onClick:E,disabled:null!==A,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:[(0,t.jsx)(N.A,{className:"w-4 h-4"}),"Actualizar"]})]})]})]})}),(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(u,{className:"w-6 h-6 text-purple-600 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Modo de Ejecuci\xf3n"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Elige c\xf3mo PostgreSQL debe ejecutarse en tu sistema."}),(0,t.jsx)("div",{className:"space-y-4",children:["APP_LIFETIME","TASK_AT_LOGON","WINDOWS_SERVICE"].map(s=>(0,t.jsx)("label",{className:"block p-4 border rounded-lg cursor-pointer transition-all ".concat((null==e?void 0:e.runMode)===s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"," ").concat("WINDOWS_SERVICE"!==s||w?"":"opacity-60"),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("input",{type:"radio",name:"runMode",value:s,checked:(null==e?void 0:e.runMode)===s,disabled:v||"WINDOWS_SERVICE"===s&&!w,onChange:()=>L(s),className:"mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:C(s)}),"WINDOWS_SERVICE"===s&&!w&&(0,t.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded",children:"Requiere Admin"}),"APP_LIFETIME"===s&&(0,t.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Recomendado"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:M(s)})]})]})},s))}),v&&(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-2 text-blue-600",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"Cambiando modo de ejecuci\xf3n..."})]})]})]})}),a&&(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Informaci\xf3n de Configuraci\xf3n"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Usuario:"}),(0,t.jsx)("span",{className:"ml-2 font-mono",children:a.user})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Base de datos:"}),(0,t.jsx)("span",{className:"ml-2 font-mono",children:a.db})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Directorio de datos:"}),(0,t.jsx)("span",{className:"ml-2 font-mono text-xs break-all",children:a.dataDir})]}),a.lastStarted&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"\xdaltimo inicio:"}),(0,t.jsx)("span",{className:"ml-2",children:new Date(a.lastStarted).toLocaleString()})]})]})]}),(0,t.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Acerca del modo offline"}),(0,t.jsx)("p",{children:"PostgreSQL embebido permite que Monterrial POS funcione completamente sin conexi\xf3n a internet. Los datos se almacenan localmente y se sincronizan con la nube cuando hay conexi\xf3n disponible."})]})]})})]}):(0,t.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Base de Datos Local"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Configuraci\xf3n de PostgreSQL embebido"}),(0,t.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(n.A,{className:"w-6 h-6 text-yellow-600 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-yellow-800",children:"Solo disponible en Desktop"}),(0,t.jsx)("p",{className:"text-yellow-700 mt-1",children:"Esta configuraci\xf3n solo est\xe1 disponible en la versi\xf3n de escritorio de Monterrial POS."})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[814,8441,1517,7358],()=>s(7925)),_N_E=e.O()}]);