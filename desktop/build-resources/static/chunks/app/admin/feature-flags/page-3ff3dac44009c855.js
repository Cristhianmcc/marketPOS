(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7421],{5311:(e,a,s)=>{Promise.resolve().then(s.bind(s,5950))},5950:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});var i=s(5155),n=s(2115);let r={ALLOW_FIADO:{name:"Ventas Fiado",description:"Permite realizar ventas a cr\xe9dito (fiado) con clientes registrados",critical:!0},ALLOW_COUPONS:{name:"Cupones de Descuento",description:"Permite aplicar cupones de descuento en el checkout",critical:!1},ENABLE_PROMOTIONS:{name:"Promociones por Producto",description:"Promociones autom\xe1ticas (2x1, pack, happy hour)",critical:!1},ENABLE_VOLUME_PROMOS:{name:"Promociones por Volumen",description:"Promociones por cantidad comprada (ej: 6 unidades x S/10)",critical:!1},ENABLE_NTH_PROMOS:{name:"Promociones N-\xe9simo",description:"Promociones cada N unidades (ej: cada 3era con 50% desc)",critical:!1},ENABLE_CATEGORY_PROMOS:{name:"Promociones por Categor\xeda",description:"Promociones aplicadas a categor\xedas completas",critical:!1},ENABLE_SUNAT:{name:"Facturaci\xf3n Electr\xf3nica SUNAT",description:"Habilita la generaci\xf3n de comprobantes electr\xf3nicos (facturas, boletas)",critical:!0},ENABLE_ADVANCED_UNITS:{name:"Unidades Avanzadas (Ferreter\xeda)",description:"Permite vender por metro cuadrado, metro lineal, kg fraccionados y conversiones",critical:!1},ENABLE_CONVERSIONS:{name:"Conversiones de Unidades",description:"Convierte autom\xe1ticamente entre unidades (ej: 1 caja = 12 unidades). Requiere Unidades Avanzadas.",critical:!1},ENABLE_SELLUNIT_PRICING:{name:"Precio por Unidad de Venta",description:"Permite definir precios especiales por presentaci\xf3n (ej: CAJA a S/5 en lugar de 12\xd7S/0.50). Requiere Conversiones.",critical:!1},ENABLE_SERVICES:{name:"Servicios (Taller/Lavander\xeda)",description:"Items de servicio como mano de obra, sin manejo de inventario",critical:!1},ENABLE_WORK_ORDERS:{name:"\xd3rdenes de Trabajo (Taller)",description:"Gesti\xf3n de recepci\xf3n, diagn\xf3stico y seguimiento de trabajos",critical:!1},ENABLE_RESERVATIONS:{name:"Reservaciones (Hostal)",description:"Check-in, check-out y disponibilidad de habitaciones",critical:!1},ENABLE_BATCH_EXPIRY:{name:"Lotes y Vencimientos (Botica)",description:"Trazabilidad de lotes, alertas de vencimiento, FIFO autom\xe1tico",critical:!1}};function t(){let[e,a]=(0,n.useState)([]),[s,t]=(0,n.useState)(!0),[c,l]=(0,n.useState)(null),[d,o]=(0,n.useState)(null),[m,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{u()},[]);let u=async()=>{t(!0),l(null);try{let e=await fetch("/api/admin/feature-flags");if(!e.ok)throw Error("Error al cargar flags");let s=await e.json();a(s.flags)}catch(e){l(e.message)}finally{t(!1)}},p=async(e,a)=>{if(r[e].critical&&!a){x({flag:e,newValue:a});return}await h(e,a)},h=async(e,s)=>{o(e),l(null);try{let i=await fetch("/api/admin/feature-flags",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e,enabled:s})});if(!i.ok){let e=await i.json();throw Error(e.message||"Error al actualizar flag")}a(a=>a.map(a=>a.key===e?{...a,enabled:s}:a)),x(null)}catch(e){l(e.message)}finally{o(null)}},g=async()=>{m&&await h(m.flag,m.newValue)};return s?(0,i.jsx)("div",{className:"p-6",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Configuraci\xf3n de Funcionalidades"}),(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("div",{className:"inline-block w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"Cargando configuraci\xf3n..."})]})]})}):(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Configuraci\xf3n de Funcionalidades"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Activa o desactiva funcionalidades para tu tienda. Los cambios son inmediatos."})]}),c&&(0,i.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:[(0,i.jsx)("strong",{children:"Error:"})," ",c]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Funcionalidad"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Estado"}),(0,i.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Acci\xf3n"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>{let a=r[e.key],s=d===e.key;return(0,i.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-start gap-3",children:[a.critical&&(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)("span",{className:"inline-block w-2 h-2 bg-orange-500 rounded-full",title:"Funcionalidad cr\xedtica"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-medium text-gray-900",children:a.name}),(0,i.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:a.description})]})]})}),(0,i.jsx)("td",{className:"px-6 py-4",children:e.enabled?(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"✓ Activa"}):(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"○ Inactiva"})}),(0,i.jsx)("td",{className:"px-6 py-4 text-right",children:(0,i.jsx)("button",{onClick:()=>p(e.key,!e.enabled),disabled:s,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(e.enabled?"bg-blue-600":"bg-gray-200"," ").concat(s?"opacity-50 cursor-not-allowed":""),children:(0,i.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(e.enabled?"translate-x-6":"translate-x-1")})})})]},e.key)})})]})}),(0,i.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,i.jsx)("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"ℹ️ Informaci\xf3n Importante"}),(0,i.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,i.jsx)("li",{children:"• Las funcionalidades cr\xedticas (con punto naranja) requieren confirmaci\xf3n antes de desactivarse"}),(0,i.jsx)("li",{children:"• Los cambios son inmediatos y afectan todas las operaciones en curso"}),(0,i.jsx)("li",{children:"• Al desactivar una funcionalidad, las operaciones relacionadas ser\xe1n rechazadas"}),(0,i.jsx)("li",{children:"• Todas las activaciones/desactivaciones quedan registradas en el log de auditor\xeda"})]})]})]}),m&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,i.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar Desactivaci\xf3n"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Esta es una funcionalidad cr\xedtica"})]})]}),(0,i.jsxs)("p",{className:"text-gray-700 mb-6",children:["\xbfEst\xe1s seguro que deseas desactivar ",(0,i.jsx)("strong",{children:r[m.flag].name}),"?",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("span",{className:"text-sm text-gray-600",children:r[m.flag].description})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),(0,i.jsx)("button",{onClick:g,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium",children:"Desactivar"})]})]})})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[8441,1517,7358],()=>a(5311)),_N_E=e.O()}]);