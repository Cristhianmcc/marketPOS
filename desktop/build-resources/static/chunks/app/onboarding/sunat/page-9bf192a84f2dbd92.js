(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4074],{9212:(e,a,s)=>{Promise.resolve().then(s.bind(s,8195))},7401:(e,a,s)=>{"use strict";s.d(a,{A:()=>u});var t=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,s)=>s?s.toUpperCase():a.toLowerCase()),i=e=>{let a=l(e);return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return a.filter((e,a,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===a).join(" ").trim()},c=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,a)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:m,...x}=e;return(0,t.createElement)("svg",{ref:a,...d,width:r,height:r,stroke:s,strokeWidth:i?24*Number(l)/Number(r):l,className:n("lucide",o),...!u&&!c(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[a,s]=e;return(0,t.createElement)(a,s)}),...Array.isArray(u)?u:[u]])}),u=(e,a)=>{let s=(0,t.forwardRef)((s,l)=>{let{className:c,...d}=s;return(0,t.createElement)(o,{ref:l,iconNode:a,className:n("lucide-".concat(r(i(e))),"lucide-".concat(e),c),...d})});return s.displayName=i(e),s}},8867:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3518:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6967:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},738:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},2598:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8617:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},4505:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2118:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]])},8236:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6118:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]])},3950:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8684:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},767:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(7401).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6046:(e,a,s)=>{"use strict";var t=s(6658);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},8195:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>k});var t=s(5155),r=s(2115),l=s(6046),i=s(814),n=s(7401);let c=(0,n.A)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),d=(0,n.A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),o=(0,n.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var u=s(6118),m=s(8236),x=s(2118),h=s(4505),g=s(3950),p=s(767),b=s(8867),f=s(6967),y=s(8617),j=s(738),N=s(2598),v=s(8684),w=s(3518);let A=[{id:"fiscal",title:"Datos Fiscales",icon:c},{id:"credentials",title:"Credenciales SOL",icon:d},{id:"certificate",title:"Certificado Digital",icon:o},{id:"test-sign",title:"Test Firma",icon:u.A},{id:"preferences",title:"Preferencias",icon:m.A},{id:"activate",title:"Activar",icon:x.A}];function k(){var e,a,s,n,c;let d=(0,l.useRouter)(),[o,m]=(0,r.useState)(!0),[k,C]=(0,r.useState)(null),[S,R]=(0,r.useState)(0),[P,T]=(0,r.useState)(!1),[E,O]=(0,r.useState)(""),[M,D]=(0,r.useState)(""),[U,L]=(0,r.useState)(""),[F,B]=(0,r.useState)(""),[z,H]=(0,r.useState)(""),[I,q]=(0,r.useState)(""),[V,_]=(0,r.useState)(!1),[G,J]=(0,r.useState)(null),[X,W]=(0,r.useState)(""),[Z,$]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(!0),[Y,ee]=(0,r.useState)(!1),[ea,es]=(0,r.useState)("NONE"),[et,er]=(0,r.useState)("BETA"),[el,ei]=(0,r.useState)(!1),[en,ec]=(0,r.useState)(""),ed=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/onboarding/sunat/status"),a=await e.json();if(!e.ok)throw Error(a.error||"Error al cargar estado");if(C(a),a.fiscalData&&(O(a.fiscalData.ruc||""),D(a.fiscalData.razonSocial||""),L(a.fiscalData.address||""),B(a.fiscalData.ubigeo||"")),a.preferences&&(Q(a.preferences.autoEmitBoleta),ee(a.preferences.allowFactura),es(a.preferences.defaultDocType)),er(a.env||"BETA"),ei(a.enabled||!1),a.steps&&0===S&&!a.enabled){let e=["fiscalData","solCredentials","certificate","testSignedXml"].findIndex(e=>!a.steps[e]);-1!==e?R(e):R(4)}}catch(e){i.oR.error(e.message)}finally{m(!1)}},[]);(0,r.useEffect)(()=>{ed()},[ed]);let eo=async()=>{T(!0);try{let e=await fetch("/api/onboarding/sunat/fiscal",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({ruc:E,razonSocial:M,address:U,ubigeo:F})}),a=await e.json();if(!e.ok)throw Error(a.error);i.oR.success("Datos fiscales guardados"),await ed(),R(1)}catch(e){i.oR.error(e.message)}finally{T(!1)}},eu=async()=>{T(!0);try{let e=await fetch("/api/onboarding/sunat/credentials",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({solUser:z,solPass:I})}),a=await e.json();if(!e.ok)throw Error(a.error);i.oR.success("Credenciales guardadas"),q(""),await ed(),R(2)}catch(e){i.oR.error(e.message)}finally{T(!1)}},em=async()=>{if(!G){i.oR.error("Selecciona un archivo .pfx");return}T(!0);try{let e=new FileReader,a=await new Promise((a,s)=>{e.onload=()=>{let s=e.result.split(",")[1];a(s)},e.onerror=s,e.readAsDataURL(G)}),s=await fetch("/api/onboarding/sunat/certificate",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({certPfxBase64:a,certPassword:X})}),t=await s.json();if(!s.ok)throw Error(t.error);i.oR.success("Certificado guardado"),W(""),await ed(),R(3)}catch(e){i.oR.error(e.message)}finally{T(!1)}},ex=async()=>{T(!0);try{let e=await fetch("/api/onboarding/sunat/test-sign",{method:"POST"}),a=await e.json();if(!e.ok)throw Error(a.error);i.oR.success("✓ Firma verificada correctamente"),await ed(),R(4)}catch(e){i.oR.error(e.message)}finally{T(!1)}},eh=async()=>{T(!0);try{let e=await fetch("/api/onboarding/sunat/preferences",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({autoEmitBoleta:K,allowFactura:Y,defaultDocType:ea})}),a=await e.json();if(!e.ok)throw Error(a.error);i.oR.success("Preferencias guardadas"),await ed(),R(5)}catch(e){i.oR.error(e.message)}finally{T(!1)}},eg=async()=>{T(!0);try{let e=await fetch("/api/onboarding/sunat/activate",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:el,env:et,confirmText:"PROD"===et?en:void 0})}),a=await e.json();if(!e.ok)throw Error(a.error);i.oR.success(a.message),await ed()}catch(e){i.oR.error(e.message)}finally{T(!1)}};if(o)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)(h.A,{className:"w-8 h-8 animate-spin text-blue-600"})});if(!(null==k?void 0:k.enabledFlag))return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[(0,t.jsx)(g.A,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"SUNAT No Disponible"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:(null==k?void 0:k.message)||"La facturaci\xf3n electr\xf3nica no est\xe1 disponible en tu plan actual."}),(0,t.jsx)("button",{onClick:()=>d.push("/pos"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Volver al POS"})]})});if((null==k?void 0:k.storeStatus)==="ARCHIVED")return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[(0,t.jsx)(p.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tienda Archivada"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No puedes configurar SUNAT en una tienda archivada."})]})});let ep=A[S],eb=null==ep?void 0:ep.icon;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Configuraci\xf3n SUNAT"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Facturaci\xf3n Electr\xf3nica"})]}),(0,t.jsx)("button",{onClick:()=>d.push("/pos"),className:"text-gray-500 hover:text-gray-700",children:(0,t.jsx)(p.A,{className:"w-6 h-6"})})]})})}),(0,t.jsx)("div",{className:"bg-white border-b overflow-x-auto",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,t.jsx)("div",{className:"flex items-center gap-1 min-w-max",children:A.map((e,a)=>{let s=e.icon,r=a<S||(null==k?void 0:k.steps)&&Object.values(k.steps)[a],l=a===S;return(0,t.jsxs)("button",{onClick:()=>R(a),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors ".concat(l?"bg-blue-100 text-blue-700":r?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:[r&&!l?(0,t.jsx)(b.A,{className:"w-3.5 h-3.5"}):(0,t.jsx)(s,{className:"w-3.5 h-3.5"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:e.title})]},e.id)})})})}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[eb&&(0,t.jsx)(eb,{className:"w-6 h-6 text-blue-600"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:null==ep?void 0:ep.title})]}),0===S&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["RUC ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:E,onChange:e=>O(e.target.value.replace(/\D/g,"").slice(0,11)),placeholder:"20123456789",maxLength:11,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"11 d\xedgitos"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Raz\xf3n Social ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:M,onChange:e=>D(e.target.value.toUpperCase()),placeholder:"MI BODEGA S.A.C.",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Direcci\xf3n Fiscal ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:U,onChange:e=>L(e.target.value),placeholder:"Av. Principal 123, Lima",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Ubigeo ",(0,t.jsx)("span",{className:"text-gray-400",children:"(opcional)"})]}),(0,t.jsx)("input",{type:"text",value:F,onChange:e=>B(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"150101",maxLength:6,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("button",{onClick:eo,disabled:P||!E||!M||!U,className:"w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[P?(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Guardar y Continuar"]})]}),1===S&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 inline mr-1"}),"Las credenciales SOL son las que usas para ingresar a SUNAT Operaciones en L\xednea."]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Usuario SOL ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:z,onChange:e=>H(e.target.value.toUpperCase()),placeholder:"MIUSUARIO",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Clave SOL ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:V?"text":"password",value:I,onChange:e=>q(e.target.value),placeholder:"••••••••",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 pr-10"}),(0,t.jsx)("button",{type:"button",onClick:()=>_(!V),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:V?(0,t.jsx)(j.A,{className:"w-4 h-4"}):(0,t.jsx)(N.A,{className:"w-4 h-4"})})]})]}),(null==k?void 0:null===(e=k.steps)||void 0===e?void 0:e.solCredentials)&&(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg text-sm text-green-700",children:[(0,t.jsx)(b.A,{className:"w-4 h-4 inline mr-1"}),"Credenciales ya configuradas. Puedes actualizarlas si es necesario."]}),(0,t.jsxs)("button",{onClick:eu,disabled:P||!z||!I,className:"w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[P?(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Guardar y Continuar"]})]}),2===S&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700",children:[(0,t.jsx)(y.A,{className:"w-4 h-4 inline mr-1"}),"El certificado digital (.pfx) es necesario para firmar los comprobantes electr\xf3nicos."]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Archivo PFX ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center",children:[(0,t.jsx)("input",{type:"file",accept:".pfx,.p12",onChange:e=>{var a;return J((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)},className:"hidden",id:"cert-upload"}),(0,t.jsxs)("label",{htmlFor:"cert-upload",className:"cursor-pointer",children:[(0,t.jsx)(v.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),G?(0,t.jsx)("span",{className:"text-sm text-green-600",children:G.name}):(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Click para subir archivo .pfx"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Contrase\xf1a del Certificado ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:Z?"text":"password",value:X,onChange:e=>W(e.target.value),placeholder:"••••••••",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 pr-10"}),(0,t.jsx)("button",{type:"button",onClick:()=>$(!Z),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",children:Z?(0,t.jsx)(j.A,{className:"w-4 h-4"}):(0,t.jsx)(N.A,{className:"w-4 h-4"})})]})]}),(null==k?void 0:null===(a=k.steps)||void 0===a?void 0:a.certificate)&&(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded-lg text-sm text-green-700",children:[(0,t.jsx)(b.A,{className:"w-4 h-4 inline mr-1"}),"Certificado ya configurado. Puedes actualizarlo si es necesario."]}),(0,t.jsxs)("button",{onClick:em,disabled:P||!G||!X,className:"w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[P?(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Guardar y Continuar"]})]}),3===S&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Vamos a verificar que el certificado digital puede firmar documentos correctamente."}),(null==k?void 0:null===(s=k.steps)||void 0===s?void 0:s.testSignedXml)?(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[(0,t.jsx)(b.A,{className:"w-12 h-12 mx-auto mb-2 text-green-500"}),(0,t.jsx)("p",{className:"font-medium text-green-700",children:"Firma verificada correctamente"})]}):(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg text-center",children:[(0,t.jsx)(u.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Haz click para probar la firma"})]}),(0,t.jsxs)("button",{onClick:ex,disabled:P,className:"w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[P?(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(u.A,{className:"w-4 h-4"}),(null==k?void 0:null===(n=k.steps)||void 0===n?void 0:n.testSignedXml)?"Probar de Nuevo":"Probar Firma"]}),(null==k?void 0:null===(c=k.steps)||void 0===c?void 0:c.testSignedXml)&&(0,t.jsxs)("button",{onClick:()=>R(4),className:"w-full py-2.5 border border-blue-600 text-blue-600 rounded-lg font-medium hover:bg-blue-50 flex items-center justify-center gap-2",children:[(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Continuar"]})]}),4===S&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Configura c\xf3mo quieres emitir los comprobantes electr\xf3nicos."}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Emisi\xf3n autom\xe1tica de BOLETA"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Emitir boleta autom\xe1ticamente despu\xe9s de cada venta"})]}),(0,t.jsx)("button",{onClick:()=>Q(!K),className:"w-12 h-6 rounded-full transition-colors ".concat(K?"bg-blue-600":"bg-gray-300"),children:(0,t.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat(K?"translate-x-6":"translate-x-0.5")})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Permitir FACTURA"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Habilitar emisi\xf3n de facturas (requiere RUC del cliente)"})]}),(0,t.jsx)("button",{onClick:()=>ee(!Y),className:"w-12 h-6 rounded-full transition-colors ".concat(Y?"bg-blue-600":"bg-gray-300"),children:(0,t.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat(Y?"translate-x-6":"translate-x-0.5")})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de documento por defecto"}),(0,t.jsxs)("select",{value:ea,onChange:e=>es(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"NONE",children:"Ninguno (preguntar siempre)"}),(0,t.jsx)("option",{value:"BOLETA",children:"BOLETA"}),Y&&(0,t.jsx)("option",{value:"FACTURA",children:"FACTURA"})]})]}),(0,t.jsxs)("button",{onClick:eh,disabled:P,className:"w-full py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[P?(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(f.A,{className:"w-4 h-4"}),"Guardar y Continuar"]})]}),5===S&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"Activar Facturaci\xf3n Electr\xf3nica"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Habilitar emisi\xf3n de comprobantes SUNAT"})]}),(0,t.jsx)("button",{onClick:()=>ei(!el),className:"w-14 h-7 rounded-full transition-colors ".concat(el?"bg-green-600":"bg-gray-300"),children:(0,t.jsx)("div",{className:"w-6 h-6 bg-white rounded-full shadow transform transition-transform ".concat(el?"translate-x-7":"translate-x-0.5")})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ambiente"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{onClick:()=>er("BETA"),className:"p-3 rounded-lg border-2 text-center ".concat("BETA"===et?"border-blue-600 bg-blue-50":"border-gray-200"),children:[(0,t.jsx)("p",{className:"font-medium",children:"BETA"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Pruebas"})]}),(0,t.jsxs)("button",{onClick:()=>er("PROD"),className:"p-3 rounded-lg border-2 text-center ".concat("PROD"===et?"border-red-600 bg-red-50":"border-gray-200"),children:[(0,t.jsx)("p",{className:"font-medium",children:"PRODUCCI\xd3N"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Real"})]})]})]}),"PROD"===et&&el&&(0,t.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsxs)("p",{className:"text-sm text-red-700 mb-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 inline mr-1"}),"Para activar PRODUCCI\xd3N, escribe: ",(0,t.jsx)("strong",{children:"ACTIVAR PRODUCCION"})]}),(0,t.jsx)("input",{type:"text",value:en,onChange:e=>ec(e.target.value),placeholder:"Escribe aqu\xed para confirmar",className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,t.jsxs)("button",{onClick:eg,disabled:P||"PROD"===et&&el&&"ACTIVAR PRODUCCION"!==en,className:"w-full py-2.5 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 ".concat(el?"bg-green-600 text-white hover:bg-green-700":"bg-gray-600 text-white hover:bg-gray-700"),children:[P?(0,t.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(x.A,{className:"w-4 h-4"}),el?"Activar SUNAT":"Desactivar SUNAT"]}),(null==k?void 0:k.enabled)&&(0,t.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[(0,t.jsx)(b.A,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),(0,t.jsxs)("p",{className:"font-medium text-green-700",children:["SUNAT est\xe1 activo en modo ",k.env]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[(0,t.jsxs)("button",{onClick:()=>R(Math.max(0,S-1)),disabled:0===S,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"}),"Anterior"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Paso ",S+1," de ",A.length]}),(0,t.jsxs)("button",{onClick:()=>R(Math.min(A.length-1,S+1)),disabled:S===A.length-1,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:["Siguiente",(0,t.jsx)(f.A,{className:"w-4 h-4"})]})]})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[814,8441,1517,7358],()=>a(9212)),_N_E=e.O()}]);